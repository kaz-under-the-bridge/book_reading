# 第23章 Note

## 全体所感

エンジニアリング効率の章。SRE・プラットフォームエンジニアとして直接関わる領域（CI/CD、ツール整備、コンプライアンス）が多い。「組織全体のエンジニアリングの速度と品質を向上させる」というスタッフ＋エンジニアの責務は、プラットフォームチームの存在意義そのもの。

## CI/CDへの投資

> 自動ビルドとテスト（ユニットテスト、静的解析など）を実行することで、フィードバックを迅速化し、リグレッションを早期に検知

> 段階的な自動ロールアウト（カナリアリリース）や、異常検知時の自動ロールバック機能を備えることで、リスクを最小限に抑える

これはプラットフォームエンジニアの主戦場。カナリアリリースと自動ロールバックの仕組み構築は、信頼性と開発速度の両立に直結する。

**課題としてのテスト実行時間短縮**：
- コードのモジュール化とキャッシュ
- テストの並列実行
- 変更箇所に関連するテストのみの実行

これらは開発者に任せるのではなく、プラットフォームとして仕組み化すべき領域。

## トランクベース開発と機能フラグ

> 堅牢なCI/CDと機能フラグの活用が前提

トランクベース開発を支えるインフラを提供するのがプラットフォームの役割。機能フラグ基盤（LaunchDarklyなど）の導入・運用もこの文脈。

> 未完成の機能を本番環境に安全にマージしたり、特定のユーザー群にのみ新機能を公開

これができる基盤があるかどうかで、開発チームのリリース戦略が変わる。

## 効率化ツール

### サービスカタログ

> 「誰がこのサービスを担当しているか」「Xを行うサービスは既に存在するか」といった情報が不明確

組織が拡大すると必ず発生する問題。サービスカタログは**情報の非対称性**を解消するインフラ。オンコール連絡先の明確化にも直結する。

### 開発者ポータル（Backstage等）

> サービスカタログ、ソフトウェアテンプレート（スキャフォールディング用）、技術ドキュメント、プラグインなどを統合

これは**AIによる知識転写**の基盤にもなりうる。ドキュメントが一元化されていれば、AIがそれを活用しやすくなる。

### クラウド開発環境（CDE）

利点：
- ビルド・テストの高速化
- 環境の一貫性（「自分のマシンでは動く」問題の解消）
- セキュリティ向上
- オンボーディング迅速化

欠点：
- 初期設定・保守コスト
- 費用増加
- オフライン作業不可

導入判断は組織規模とボトルネック次第。小規模チームにはオーバーヘッド。

### ツールの導入判断

> 開発するか、購入するか、採用するか

- **開発**: 規模がソリューションを超える場合（大手テック）
- **購入**: 短期的には最も安価で迅速
- **採用（OSS）**: インフラ・カスタマイズコストがかかる

プラットフォームチームとしては、この判断を繰り返し行うことになる。「自作」の誘惑に負けず、既存ソリューションで解決できるか常に検討すべき。

## コンプライアンスとセキュリティ

### ログ記録の衛生管理

> エンドツーエンドの暗号化なしでPIIをログに記録することはデータ侵害のリスク

対策：
- ログ内での匿名化
- 非PIIデータへの変換
- PIIを含まないようにする指針策定
- ログが規制を順守しているかの監査

これはプラットフォームレベルで仕組み化すべき。アプリケーションエンジニアが個別に意識しなくても、PIIが漏れない設計にする。

### 監査対応

> 最初の監査準備には多大な労力を要しますが、一度合格してプロセスが導入されれば、その後の維持は容易

初回は覚悟が必要。ただし、その投資が継続的なコンプライアンス維持の基盤になる。

### セキュリティエンジニアとの連携

> プロジェクトの計画時や重要なコード変更時に彼らの知見を活用

プラットフォームチームとセキュリティチームの連携は必須。依存関係の脆弱性管理（Log4jの例）もプラットフォームの責務範囲。

## 「銀の弾丸」はない

> どのプラクティスやツールを採用するかは、組織の規模や課題に応じたトレードオフを考慮して決定する必要があります

モノリポ vs マルチリポ、マイクロサービス vs モノリス、自作 vs 購入。すべてトレードオフ。組織のフェーズとボトルネックに応じて選択する。
