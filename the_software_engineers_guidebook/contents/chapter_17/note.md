# 第17章 Note

## 全体所感

「本番環境へのリリース」の章。プラットフォームエンジニア/SREとして最も関連の深い領域。YOLOリリースから徹底的な検証まで、リリースプロセスのスペクトルを理解することが重要。

## リリースプロセスの成熟度

企業のフェーズによってアプローチが異なるという整理は有用。

| フェーズ | アプローチ |
|---------|-----------|
| スタートアップ | 速度重視、手動テスト主体 |
| 伝統的企業 | QAチーム依存、週次一括リリース |
| ビッグテック | 自動化投資、1日複数回リリース |

プラットフォームチームの役割は、組織のフェーズに応じた**リリース基盤**を提供すること。

## 本番環境でのテスト

> 近年は本番環境を活用する手法が一般的になっています

これはT字型人材の文脈とも関連する。機能フラグ、カナリアリリース、自動ロールバックといった**インフラ知識**がないとこのアプローチは取れない。

### 機能フラグ

コードをデプロイしつつ、機能を無効化しておき、特定のユーザーにのみ有効化してテストする。

- プラットフォームチームとして**機能フラグ基盤**（LaunchDarklyなど）の導入・運用は重要な責務

### カナリアリリース

全ユーザーの1%など、一部にのみ新バージョンを適用し、問題があれば停止する。

- **モニタリングとアラート**が前提。これがないとカナリアの意味がない

### 自動ロールバック

エラー率などのメトリクスが悪化した場合、自動的に旧バージョンに戻す。

- 人間の判断を待たずに**緩和を優先**する仕組み。第24章の信頼性の考え方と一致

## エラーバジェット

> 100%の稼働を目指すのではなく、許容できるエラーの範囲（予算）を決め、その範囲内であればリスクを取ってリリース速度を上げる

SREの基本概念。完璧を目指すのではなく、**ビジネスニーズに応じたトレードオフ**を取る考え方。

## プラットフォームエンジニアとしての視点

この章は**プラットフォームチームの主戦場**。

- **CI/CDパイプライン**の構築・運用
- **機能フラグ基盤**の提供
- **カナリアリリース**の仕組み化
- **自動ロールバック**の実装
- **モニタリング・アラート**基盤の整備

開発者チームが「コードを書くだけでなく、本番環境で安全に動作させる」ことに集中できる環境を提供するのがプラットフォームチームの価値。
